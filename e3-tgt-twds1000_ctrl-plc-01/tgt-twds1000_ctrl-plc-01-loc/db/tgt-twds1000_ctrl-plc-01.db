
record(stringin, "Tgt-TWDS1000:Ctrl-PLC-01:ModVersionR") {
	field(DISP,	"1")
	field(VAL,	"$(MODVERSION=N/A)")
	field(PINI,	"YES")
}

record(stringin, "Tgt-TWDS1000:Ctrl-PLC-01:PLCFCommitR") {
	field(DISP,	"1")
#f1289053d9df2e9dccebe3f8e128688bc60589b8
	field(VAL,	"f1289053d9df2e9dccebe3f8e128688bc60589b")
	field(PINI,	"YES")
	info("plcf_commit", "f1289053d9df2e9dccebe3f8e128688bc60589b8")
}

#########################################################
########## EPICS <-> PLC connection management ##########
#########################################################
record(asyn, "Tgt-TWDS1000:Ctrl-PLC-01:iAsyn") {
	field(DTYP,	"asynRecordDevice")
	field(PORT,	"$(PLCNAME)")
}
record(bi, "Tgt-TWDS1000:Ctrl-PLC-01:ModbusConnectedR") {
	field(DESC,	"Shows if the MODBUS channel connected")
	field(INP,	"Tgt-TWDS1000:Ctrl-PLC-01:iAsyn.CNCT CP")
	field(ONAM,	"Connected")
	field(ZNAM,	"Disconnected")
	field(ZSV,      "MAJOR")
	field(FLNK,	"Tgt-TWDS1000:Ctrl-PLC-01:CommsHashToPLCS")
}
record(bi, "Tgt-TWDS1000:Ctrl-PLC-01:S7ConnectedR") {
	field(DESC,	"Shows if the S7 channel is connected")
	field(SCAN,	"I/O Intr")
	field(DTYP,	"S7plc stat")
	field(INP,	"@$(PLCNAME)")
	field(ONAM,	"Connected")
	field(ZNAM,	"Disconnected")
	field(ZSV,      "MAJOR")
}
record(stringin, "Tgt-TWDS1000:Ctrl-PLC-01:PLCAddr-RB") {
# We assume S7 and Modbus address are the same (as they should be)
	field(DESC,	"Address of the PLC")
}
record(scalcout, "Tgt-TWDS1000:Ctrl-PLC-01:iPLCAddr-RB") {
	field(DESC,	"Strip port number of host:port")
	field(INAA,	"Tgt-TWDS1000:Ctrl-PLC-01:S7Addr-RB CP")
	field(CALC,	"AA[0,':']")
	field(OUT,	"Tgt-TWDS1000:Ctrl-PLC-01:PLCAddr-RB PP")
}
record(stringout, "Tgt-TWDS1000:Ctrl-PLC-01:PLCAddrS") {
	field(DESC,	"Address of the PLC")
	field(FLNK,	"Tgt-TWDS1000:Ctrl-PLC-01:iSetPLCAddrS")
}
record(fanout, "Tgt-TWDS1000:Ctrl-PLC-01:iSetPLCAddrS") {
	field(LNK1,	"Tgt-TWDS1000:Ctrl-PLC-01:iCalcS7AddrS")
	field(LNK2,	"Tgt-TWDS1000:Ctrl-PLC-01:iCalcModbusAddrS")
}
record(scalcout, "Tgt-TWDS1000:Ctrl-PLC-01:iCalcS7AddrS") {
	field(INAA,	"Tgt-TWDS1000:Ctrl-PLC-01:PLCAddrS")
	field(CALC,	"AA + ':' + '$(S7_PORT)'")
	field(OUT,	"Tgt-TWDS1000:Ctrl-PLC-01:iS7AddrS PP")
}
record(scalcout, "Tgt-TWDS1000:Ctrl-PLC-01:iCalcModbusAddrS") {
	field(INAA,	"Tgt-TWDS1000:Ctrl-PLC-01:PLCAddrS")
	field(CALC,	"AA + ':' + '$(MODBUS_PORT)'")
	field(OUT,	"Tgt-TWDS1000:Ctrl-PLC-01:iAsyn.HOSTINFO PP")
}
record(stringin, "Tgt-TWDS1000:Ctrl-PLC-01:ModbusAddr-RB") {
	field(DESC,	"Address of the PLC")
	field(INP,	"Tgt-TWDS1000:Ctrl-PLC-01:iAsyn.HOSTINFO CP")
}
record(stringin, "Tgt-TWDS1000:Ctrl-PLC-01:S7Addr-RB") {
	field(DESC,	"Address of the PLC")
	field(INP,	"Tgt-TWDS1000:Ctrl-PLC-01:iS7AddrS CP")
}
record(stringout, "Tgt-TWDS1000:Ctrl-PLC-01:iS7AddrS") {
	field(DESC,	"Set address of the PLC")
	field(DTYP,	"S7plc addr")
	field(OUT,	"@$(PLCNAME)")
	field(DISP,	"1")
}
record(calcout, "Tgt-TWDS1000:Ctrl-PLC-01:iCalcConn") {
	field(INPA,	"Tgt-TWDS1000:Ctrl-PLC-01:S7ConnectedR CP")
	field(INPB,	"Tgt-TWDS1000:Ctrl-PLC-01:ModbusConnectedR CP")
	field(CALC,	"A && B")
	field(OUT,	"Tgt-TWDS1000:Ctrl-PLC-01:ConnectedR PP")
}
record(bi, "Tgt-TWDS1000:Ctrl-PLC-01:ConnectedR") {
	field(DESC,	"Shows if the PLC is connected")
	field(ONAM,	"Connected")
	field(ZNAM,	"Disconnected")
	field(ZSV,      "MAJOR")
}
record(bi, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR") {
	field(DESC,	"Shows if the comms hash is correct")
	field(ONAM,	"Correct")
	field(ZNAM,	"Incorrect")
	field(ZSV,      "MAJOR")
}
record(bi, "Tgt-TWDS1000:Ctrl-PLC-01:AliveR") {
	alias("Tgt-TWDS1000:Ctrl-PLC-01:CommsOK")
	field(DESC,	"Shows if the PLC is sending heartbeats")
	field(ONAM,	"Alive")
	field(ZNAM,	"Not responding")
	field(ZSV,      "MAJOR")
}
record(calcout, "Tgt-TWDS1000:Ctrl-PLC-01:iCheckHash") {
	field(INPA,	"Tgt-TWDS1000:Ctrl-PLC-01:iCommsHashToPLC")
	field(INPB,	"Tgt-TWDS1000:Ctrl-PLC-01:CommsHashFromPLCR")
	field(INPC,	"Tgt-TWDS1000:Ctrl-PLC-01:CommsHashFromPLCR.STAT")
	field(CALC,	"A == B && C == 0")
	field(OOPT,	"On Change")
	field(OUT,	"Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR PP")
}
record(bi, "Tgt-TWDS1000:Ctrl-PLC-01:iOne") {
	field(DISP,	"1")
	field(PINI,	"YES")
	field(VAL,	"1")
}
record(bo, "Tgt-TWDS1000:Ctrl-PLC-01:iGotHeartbeat") {
	field(DOL,	"Tgt-TWDS1000:Ctrl-PLC-01:iOne")
	field(OMSL,	"closed_loop")
	field(OUT,	"Tgt-TWDS1000:Ctrl-PLC-01:iKickAlive PP")
}
record(bo, "Tgt-TWDS1000:Ctrl-PLC-01:iKickAlive") {
	field(HIGH,	"5")
	field(OUT,	"Tgt-TWDS1000:Ctrl-PLC-01:AliveR PP")
}

########################################################
########## EPICS -> PLC comms management data ##########
########################################################
record(ao, "Tgt-TWDS1000:Ctrl-PLC-01:iCommsHashToPLC") {
	field(DISP,	"1")
	field(PINI,	"YES")
	field(VAL,	"914832792")
}
record(ao, "Tgt-TWDS1000:Ctrl-PLC-01:CommsHashToPLCS") {
	field(DESC,	"Sends comms hash to PLC")
	field(SCAN,	"1 second")
	field(DTYP,	"asynInt32")
	field(OUT,	"@asyn($(PLCNAME)write, 12288, 100)INT32_LE")
	field(OMSL,	"closed_loop")
	field(DOL,	"Tgt-TWDS1000:Ctrl-PLC-01:iCommsHashToPLC")
	field(DISV,	"0")
	field(SDIS,	"Tgt-TWDS1000:Ctrl-PLC-01:ModbusConnectedR")
}
record(calc, "Tgt-TWDS1000:Ctrl-PLC-01:iHeartbeatToPLC") {
	field(SCAN,	"1 second")
	field(INPA,	"Tgt-TWDS1000:Ctrl-PLC-01:iHeartbeatToPLC.VAL")
	field(CALC,	"(A >= 32000)? 0 : A + 1")
	field(FLNK,	"Tgt-TWDS1000:Ctrl-PLC-01:HeartbeatToPLCS")
	field(DISV,	"0")
	field(SDIS,	"Tgt-TWDS1000:Ctrl-PLC-01:ModbusConnectedR")
}
record(ao, "Tgt-TWDS1000:Ctrl-PLC-01:HeartbeatToPLCS") {
	field(DESC,	"Sends heartbeat to PLC")
	field(DTYP,	"asynInt32")
	field(OUT,	"@asyn($(PLCNAME)write, 12290, 100)")
	field(OMSL,	"closed_loop")
	field(DOL,	"Tgt-TWDS1000:Ctrl-PLC-01:iHeartbeatToPLC.VAL")
	field(OIF,	"Full")
	field(DRVL,	"0")
	field(DRVH,	"32000")
	field(DISV,	"0")
	field(SDIS,	"Tgt-TWDS1000:Ctrl-PLC-01:ModbusConnectedR")
}

########################################################
########## PLC -> EPICS comms management data ##########
########################################################
record(ai, "Tgt-TWDS1000:Ctrl-PLC-01:CommsHashFromPLCR") {
	field(DESC,	"Comms hash from PLC")
	field(SCAN,	"I/O Intr")
	field(DTYP,	"S7plc")
	field(INP,	"@$(PLCNAME)/0 T=INT32")
	field(FLNK,	"Tgt-TWDS1000:Ctrl-PLC-01:iCheckHash")
}
record(ai, "Tgt-TWDS1000:Ctrl-PLC-01:HeartbeatFromPLCR") {
	field(DESC,	"Heartbeat from PLC")
	field(SCAN,	"I/O Intr")
	field(DTYP,	"S7plc")
	field(INP,	"@$(PLCNAME)/4 T=INT16")
	field(FLNK,	"Tgt-TWDS1000:Ctrl-PLC-01:iGotHeartbeat")
	field(DISS,	"INVALID")
	field(DISV,	"0")
	field(SDIS,	"Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
}


##########
########## Tgt-TWDS1000:Mech-EE-050 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 27
##########

#Author:  Johannes Kazantzidis
#Date:    03-12-2019
#Version: v1.0

############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-EE-050 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-EE-050:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/20 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-EE-050:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/20 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-EE-050:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/20 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-EE-050:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/20 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-EE-050:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/20 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-EE-050:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/22 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-EE-050:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-EE-050:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-EE-050:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/24 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-EE-050:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/26 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-EE-050:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/30 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Value in Engineering Unit",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-EE-050:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/34 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Value in Engineering Unit")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",                           PV_DESC="Measured Current",     PV_EGU="mA")
record(ai, "Tgt-TWDS1000:Mech-EE-050:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/38 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Measured Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "MeasCurrent")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-EE-050:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/42 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-EE-050:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/44 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-EE-050:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/48 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "Tgt-TWDS1000:Mech-EE-050:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/52 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "Tgt-TWDS1000:Mech-EE-050:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/52 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Value Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-EE-050:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/52 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Value Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-EE-050:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/52 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Value HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-EE-050:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/52 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Value HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-EE-050:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/52 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Value LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-EE-050:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/52 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Value LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-EE-050:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/52 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-EE-050:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/52 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-EE-050:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/52 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Value", PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-EE-050:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/54 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-EE-050:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/58 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-EE-050:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/62 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-EE-050:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/66 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-EE-050:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/70 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-EE-050 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-EE-050:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12298, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-EE-050:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12298, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-EE-050:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12298, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-EE-050:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12298, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-EE-050:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12298, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-EE-050:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12298, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-EE-050:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12298, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-EE-050 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-EE-050:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12299, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-EE-050:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12301, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-EE-050:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12303, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-EE-050:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12305, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Value",          PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-EE-050:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12307, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-EE-050:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12309, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-EE-050:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12311, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-EE-050_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-EE-050:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-EE-050:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-EE-050:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-EE-050:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-EE-050:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-EE-050:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-EE-050:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-EE-050:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-EE-050:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-EE-050:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-TE-011 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 27
##########

#Author:  Johannes Kazantzidis
#Date:    03-12-2019
#Version: v1.0

############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-TE-011 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-011:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/74 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-011:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/74 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-TE-011:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/74 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-TE-011:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/74 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-TE-011:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/74 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-TE-011:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/76 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-011:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/78 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-011:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/78 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-011:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/78 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-011:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/80 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-011:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/84 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Value in Engineering Unit",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-011:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/88 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Value in Engineering Unit")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",                           PV_DESC="Measured Current",     PV_EGU="mA")
record(ai, "Tgt-TWDS1000:Mech-TE-011:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/92 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Measured Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "MeasCurrent")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-011:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/96 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-011:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/98 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-011:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/102 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "Tgt-TWDS1000:Mech-TE-011:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/106 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "Tgt-TWDS1000:Mech-TE-011:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/106 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Value Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-011:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/106 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Value Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-011:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/106 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Value HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-011:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/106 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Value HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-011:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/106 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Value LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-011:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/106 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Value LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-011:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/106 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-011:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/106 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-011:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/106 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Value", PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-011:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/108 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-011:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/112 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-011:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/116 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-011:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/120 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-011:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/124 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-TE-011 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-011:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12313, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-011:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12313, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-TE-011:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12313, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-TE-011:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12313, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-011:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12313, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-011:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12313, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-011:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12313, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-TE-011 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-011:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12314, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-011:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12316, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-011:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12318, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-011:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12320, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Value",          PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-011:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12322, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-TE-011:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12324, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-TE-011:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12326, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-011_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-TE-011:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-011:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-011:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-TE-011:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-TE-011:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-TE-011:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-TE-011:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-TE-011:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-011:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-011:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-TE-012 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 27
##########

#Author:  Johannes Kazantzidis
#Date:    03-12-2019
#Version: v1.0

############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-TE-012 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-012:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/128 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-012:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/128 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-TE-012:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/128 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-TE-012:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/128 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-TE-012:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/128 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-TE-012:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/130 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-012:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/132 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-012:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/132 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-012:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/132 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-012:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/134 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-012:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/138 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Value in Engineering Unit",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-012:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/142 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Value in Engineering Unit")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",                           PV_DESC="Measured Current",     PV_EGU="mA")
record(ai, "Tgt-TWDS1000:Mech-TE-012:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/146 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Measured Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "MeasCurrent")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-012:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/150 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-012:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/152 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-012:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/156 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "Tgt-TWDS1000:Mech-TE-012:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/160 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "Tgt-TWDS1000:Mech-TE-012:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/160 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Value Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-012:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/160 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Value Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-012:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/160 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Value HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-012:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/160 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Value HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-012:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/160 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Value LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-012:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/160 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Value LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-012:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/160 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-012:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/160 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-012:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/160 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Value", PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-012:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/162 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-012:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/166 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-012:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/170 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-012:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/174 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-012:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/178 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-TE-012 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-012:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12328, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-012:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12328, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-TE-012:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12328, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-TE-012:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12328, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-012:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12328, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-012:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12328, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-012:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12328, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-TE-012 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-012:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12329, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-012:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12331, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-012:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12333, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-012:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12335, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Value",          PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-012:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12337, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-TE-012:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12339, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-TE-012:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12341, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-012_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-TE-012:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-012:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-012:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-TE-012:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-TE-012:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-TE-012:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-TE-012:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-TE-012:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-012:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-012:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-TE-021 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 27
##########

#Author:  Johannes Kazantzidis
#Date:    03-12-2019
#Version: v1.0

############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-TE-021 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-021:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/182 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-021:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/182 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-TE-021:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/182 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-TE-021:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/182 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-TE-021:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/182 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-TE-021:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/184 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-021:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/186 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-021:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/186 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-021:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/186 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-021:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/188 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-021:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/192 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Value in Engineering Unit",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-021:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/196 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Value in Engineering Unit")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",                           PV_DESC="Measured Current",     PV_EGU="mA")
record(ai, "Tgt-TWDS1000:Mech-TE-021:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/200 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Measured Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "MeasCurrent")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-021:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/204 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-021:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/206 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-021:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/210 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "Tgt-TWDS1000:Mech-TE-021:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/214 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "Tgt-TWDS1000:Mech-TE-021:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/214 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Value Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-021:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/214 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Value Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-021:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/214 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Value HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-021:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/214 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Value HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-021:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/214 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Value LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-021:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/214 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Value LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-021:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/214 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-021:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/214 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-021:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/214 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Value", PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-021:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/216 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-021:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/220 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-021:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/224 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-021:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/228 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-021:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/232 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-TE-021 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-021:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12343, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-021:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12343, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-TE-021:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12343, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-TE-021:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12343, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-021:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12343, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-021:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12343, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-021:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12343, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-TE-021 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-021:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12344, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-021:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12346, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-021:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12348, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-021:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12350, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Value",          PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-021:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12352, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-TE-021:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12354, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-TE-021:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12356, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-021_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-TE-021:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-021:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-021:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-TE-021:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-TE-021:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-TE-021:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-TE-021:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-TE-021:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-021:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-021:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-TE-022 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 27
##########

#Author:  Johannes Kazantzidis
#Date:    03-12-2019
#Version: v1.0

############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-TE-022 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-022:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/236 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-022:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/236 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-TE-022:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/236 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-TE-022:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/236 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-TE-022:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/236 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-TE-022:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/238 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-022:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/240 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-022:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/240 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-022:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/240 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-022:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/242 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-022:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/246 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Value in Engineering Unit",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-022:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/250 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Value in Engineering Unit")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",                           PV_DESC="Measured Current",     PV_EGU="mA")
record(ai, "Tgt-TWDS1000:Mech-TE-022:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/254 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Measured Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "MeasCurrent")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-022:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/258 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-022:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/260 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-022:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/264 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "Tgt-TWDS1000:Mech-TE-022:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/268 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "Tgt-TWDS1000:Mech-TE-022:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/268 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Value Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-022:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/268 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Value Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-022:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/268 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Value HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-022:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/268 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Value HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-022:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/268 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Value LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-022:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/268 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Value LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-022:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/268 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-022:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/268 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-022:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/268 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Value", PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-022:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/270 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-022:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/274 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-022:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/278 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-022:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/282 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-022:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/286 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-TE-022 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-022:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12358, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-022:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12358, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-TE-022:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12358, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-TE-022:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12358, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-022:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12358, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-022:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12358, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-022:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12358, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-TE-022 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-022:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12359, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-022:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12361, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-022:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12363, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-022:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12365, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Value",          PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-022:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12367, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-TE-022:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12369, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-TE-022:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12371, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-022_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-TE-022:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-022:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-022:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-TE-022:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-TE-022:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-TE-022:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-TE-022:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-TE-022:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-022:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-022:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-TE-023 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 27
##########

#Author:  Johannes Kazantzidis
#Date:    03-12-2019
#Version: v1.0

############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-TE-023 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-023:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/290 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-023:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/290 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-TE-023:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/290 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-TE-023:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/290 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-TE-023:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/290 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-TE-023:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/292 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-023:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/294 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-023:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/294 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-023:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/294 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-023:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/296 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-023:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/300 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Value in Engineering Unit",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-023:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/304 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Value in Engineering Unit")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",                           PV_DESC="Measured Current",     PV_EGU="mA")
record(ai, "Tgt-TWDS1000:Mech-TE-023:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/308 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Measured Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "MeasCurrent")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-023:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/312 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-023:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/314 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-023:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/318 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "Tgt-TWDS1000:Mech-TE-023:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "Tgt-TWDS1000:Mech-TE-023:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Value Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-023:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Value Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-023:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Value HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-023:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Value HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-023:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Value LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-023:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Value LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-023:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-023:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-023:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/322 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Value", PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-023:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/324 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-023:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/328 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-023:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/332 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-023:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/336 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-023:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/340 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-TE-023 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-023:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12373, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-023:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12373, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-TE-023:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12373, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-TE-023:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12373, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-023:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12373, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-023:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12373, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-023:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12373, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-TE-023 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-023:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12374, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-023:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12376, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-023:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12378, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-023:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12380, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Value",          PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-023:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12382, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-TE-023:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12384, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-TE-023:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12386, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-023_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-TE-023:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-023:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-023:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-TE-023:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-TE-023:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-TE-023:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-TE-023:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-TE-023:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-023:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-023:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-TE-024 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 27
##########

#Author:  Johannes Kazantzidis
#Date:    03-12-2019
#Version: v1.0

############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-TE-024 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-024:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/344 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-024:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/344 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-TE-024:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/344 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-TE-024:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/344 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-TE-024:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/344 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-TE-024:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/346 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-024:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-024:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-024:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/348 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-024:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/350 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-024:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/354 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Value in Engineering Unit",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-024:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/358 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Value in Engineering Unit")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",                           PV_DESC="Measured Current",     PV_EGU="mA")
record(ai, "Tgt-TWDS1000:Mech-TE-024:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/362 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Measured Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "MeasCurrent")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-024:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/366 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-024:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/368 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-024:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/372 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "Tgt-TWDS1000:Mech-TE-024:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/376 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "Tgt-TWDS1000:Mech-TE-024:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/376 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Value Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-024:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/376 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Value Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-024:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/376 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Value HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-024:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/376 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Value HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-024:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/376 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Value LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-024:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/376 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Value LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-024:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/376 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-024:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/376 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-024:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/376 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Value", PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-024:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/378 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-024:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/382 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-024:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/386 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-024:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/390 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-024:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/394 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-TE-024 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-024:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12388, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-024:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12388, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-TE-024:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12388, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-TE-024:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12388, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-024:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12388, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-024:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12388, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-024:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12388, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-TE-024 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-024:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12389, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-024:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12391, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-024:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12393, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-024:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12395, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Value",          PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-024:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12397, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-TE-024:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12399, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-TE-024:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12401, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-024_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-TE-024:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-024:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-024:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-TE-024:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-TE-024:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-TE-024:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-TE-024:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-TE-024:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-024:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-024:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-TE-025 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 27
##########

#Author:  Johannes Kazantzidis
#Date:    03-12-2019
#Version: v1.0

############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-TE-025 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-025:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/398 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-025:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/398 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-TE-025:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/398 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-TE-025:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/398 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-TE-025:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/398 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-TE-025:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/400 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-025:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/402 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-025:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/402 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-025:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/402 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-025:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/404 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-025:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/408 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Value in Engineering Unit",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-025:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/412 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Value in Engineering Unit")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "MeasValue")
}

#<<<--- add_analog("MeasCurrent",              "REAL",                           PV_DESC="Measured Current",     PV_EGU="mA")
record(ai, "Tgt-TWDS1000:Mech-TE-025:MeasCurrent")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/416 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Measured Current")
	field(EGU,  "mA")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "MeasCurrent")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-TE-025:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/420 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-025:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/422 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-TE-025:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/426 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#<<<--- add_digital("LatchAlarm",                            PV_DESC="Latching of the alarms")
record(bi, "Tgt-TWDS1000:Mech-TE-025:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/430 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Latching of the alarms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_digital("GroupAlarm",                            PV_DESC="Group Alarm for OPI")
record(bi, "Tgt-TWDS1000:Mech-TE-025:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/430 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Alarm for OPI")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "GroupAlarm")
}


#Alarm signals
#<<<--- add_major_alarm("Underrange",          "Value Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-025:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/430 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Value Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-025:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/430 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Value HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-025:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/430 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Value HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-025:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/430 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Value LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-025:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/430 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Value LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-025:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/430 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Value LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-025:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/430 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-TE-025:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/430 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Value", PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-025:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/432 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-025:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/436 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-025:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/440 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-025:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/444 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="null")
record(ai, "Tgt-TWDS1000:Mech-TE-025:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/448 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-TE-025 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-025:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12403, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-TE-025:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12403, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-TE-025:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12403, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-TE-025:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12403, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-025:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12403, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-025:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12403, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-TE-025:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12403, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-TE-025 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-025:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12404, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-025:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12406, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-025:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12408, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-025:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12410, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Value",          PV_EGU="null")
record(ao, "Tgt-TWDS1000:Mech-TE-025:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12412, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Value")
	field(EGU,  "null")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-TE-025:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12414, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-TE-025:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12416, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-TE-025_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-TE-025:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-025:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-025:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-TE-025:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-TE-025:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-TE-025:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-TE-025:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-TE-025:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-025:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-025:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Proc-P-013 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 12
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                           DP - Remote Discrete Pump (ON/OFF Pump)                        ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable name unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################ Version: 1.0,1.1             ####################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-P-013 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",   PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-013:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/452 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-013:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/452 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-013:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/452 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Running",                 PV_DESC="Pump Running",          PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-013:Running")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/452 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Pump Running")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Running")
}

#<<<--- add_digital("Stopped",                 PV_DESC="Pump Stopped",          PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-013:Stopped")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/452 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Pump Stopped")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Stopped")
}

#<<<--- add_analog("PumpColor", "INT",         PV_DESC="BlockIcon pump color")
record(ai, "Tgt-TWDS1000:Proc-P-013:PumpColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/454 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon pump color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "PumpColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",   PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Proc-P-013:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/456 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",    PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Proc-P-013:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/456 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",       PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Proc-P-013:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/456 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-013:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/456 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",          PV_DESC="Start Interlock",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-013:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/456 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "StartInterlock")
}


#for OPI visualization
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-013:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/456 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-013:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/456 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",   PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-013:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/456 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",         PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-013:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/456 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                          PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Proc-P-013:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/458 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                          PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Proc-P-013:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/462 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",            PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Proc-P-013:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/466 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "Group Alarm",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-013:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/466 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Group Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Starting_TimeOut",    "Starting Time Out",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-013:Starting_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/466 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Starting Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Starting_TimeOut")
}

#<<<--- add_major_alarm("Stopping_TimeOut",    "Stopping Time Out",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-013:Stopping_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/466 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Stopping Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Stopping_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "HW IO Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-013:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/466 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-013:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/466 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",        PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-013:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/466 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Output_Module_Error")
}


#OPI timeouts
#<<<--- add_time("StartingTime",               PV_DESC="Starting Time")
record(ai, "Tgt-TWDS1000:Proc-P-013:StartingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/468 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Starting Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "StartingTime")
}

#<<<--- add_time("StoppingTime",               PV_DESC="Stopping Time")
record(ai, "Tgt-TWDS1000:Proc-P-013:StoppingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/472 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Stopping Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "StoppingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-P-013 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-P-013:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12418, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-P-013:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12418, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Proc-P-013:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12418, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuStart",           PV_DESC="CMD: Manual Start")
record(bo, "Tgt-TWDS1000:Proc-P-013:Cmd_ManuStart")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12418, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Start")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Cmd_ManuStart")
}

#<<<--- add_digital("Cmd_ManuStop",            PV_DESC="CMD: Manual Stop")
record(bo, "Tgt-TWDS1000:Proc-P-013:Cmd_ManuStop")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12418, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Stop")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Cmd_ManuStop")
}

#<<<--- add_digital("Cmd_ForceStart",          PV_DESC="CMD: Force Start")
record(bo, "Tgt-TWDS1000:Proc-P-013:Cmd_ForceStart")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12418, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Start")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Cmd_ForceStart")
}

#<<<--- add_digital("Cmd_ForceStop",           PV_DESC="CMD: Force Stop")
record(bo, "Tgt-TWDS1000:Proc-P-013:Cmd_ForceStop")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12418, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Stop")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Cmd_ForceStop")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Proc-P-013:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12418, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-P-013:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12418, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Proc-P-013:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12418, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-P-013:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12418, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-P-013 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                          PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Proc-P-013:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12419, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                          PV_DESC="Device ID after BlockIcon Open")
record(ao, "Tgt-TWDS1000:Proc-P-013:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12421, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after BlockIcon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-013_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Proc-P-013:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Proc-P-013:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Proc-P-013:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Proc-P-014 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 12
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                           DP - Remote Discrete Pump (ON/OFF Pump)                        ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable name unification
############################         Version: 1.2             ################################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization
############################ Version: 1.0,1.1             ####################################
#Author:  Miklos Boros, Marino Vojneski
#Date:    12-06-2018
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-P-014 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",   PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-014:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/476 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-014:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/476 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-014:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/476 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Running",                 PV_DESC="Pump Running",          PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-014:Running")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/476 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Pump Running")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Running")
}

#<<<--- add_digital("Stopped",                 PV_DESC="Pump Stopped",          PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-014:Stopped")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/476 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Pump Stopped")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Stopped")
}

#<<<--- add_analog("PumpColor", "INT",         PV_DESC="BlockIcon pump color")
record(ai, "Tgt-TWDS1000:Proc-P-014:PumpColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/478 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon pump color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "PumpColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",   PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Proc-P-014:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/480 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",    PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Proc-P-014:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/480 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",       PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Proc-P-014:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/480 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-014:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/480 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",          PV_DESC="Start Interlock",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-014:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/480 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "StartInterlock")
}


#for OPI visualization
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-014:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/480 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-014:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/480 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",   PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-014:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/480 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",         PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-P-014:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/480 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                          PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Proc-P-014:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/482 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                          PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Proc-P-014:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/486 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",            PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Proc-P-014:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/490 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "Group Alarm",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-014:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/490 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Group Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Starting_TimeOut",    "Starting Time Out",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-014:Starting_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/490 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Starting Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Starting_TimeOut")
}

#<<<--- add_major_alarm("Stopping_TimeOut",    "Stopping Time Out",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-014:Stopping_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/490 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Stopping Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Stopping_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "HW IO Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-014:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/490 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-014:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/490 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",        PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-P-014:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/490 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Output_Module_Error")
}


#OPI timeouts
#<<<--- add_time("StartingTime",               PV_DESC="Starting Time")
record(ai, "Tgt-TWDS1000:Proc-P-014:StartingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/492 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Starting Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "StartingTime")
}

#<<<--- add_time("StoppingTime",               PV_DESC="Stopping Time")
record(ai, "Tgt-TWDS1000:Proc-P-014:StoppingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/496 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Stopping Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "StoppingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-P-014 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-P-014:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12423, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-P-014:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12423, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Proc-P-014:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12423, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuStart",           PV_DESC="CMD: Manual Start")
record(bo, "Tgt-TWDS1000:Proc-P-014:Cmd_ManuStart")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12423, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Start")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Cmd_ManuStart")
}

#<<<--- add_digital("Cmd_ManuStop",            PV_DESC="CMD: Manual Stop")
record(bo, "Tgt-TWDS1000:Proc-P-014:Cmd_ManuStop")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12423, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Stop")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Cmd_ManuStop")
}

#<<<--- add_digital("Cmd_ForceStart",          PV_DESC="CMD: Force Start")
record(bo, "Tgt-TWDS1000:Proc-P-014:Cmd_ForceStart")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12423, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Start")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Cmd_ForceStart")
}

#<<<--- add_digital("Cmd_ForceStop",           PV_DESC="CMD: Force Stop")
record(bo, "Tgt-TWDS1000:Proc-P-014:Cmd_ForceStop")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12423, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Stop")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Cmd_ForceStop")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Proc-P-014:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12423, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-P-014:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12423, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Proc-P-014:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12423, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-P-014:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12423, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-P-014 EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                          PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Proc-P-014:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12424, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                          PV_DESC="Device ID after BlockIcon Open")
record(ao, "Tgt-TWDS1000:Proc-P-014:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12426, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after BlockIcon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-P-014_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Proc-P-014:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Proc-P-014:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Proc-P-014:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Proc-GB-114c ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 0
########## StatusWordsLength: 1
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_DO                                                               ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                             DIO - Single Digital Input/Output                            ##
##                                                                                          ##
##                                                                                          ##
############################ Version: 1.0             ########################################
#Author:  Saeed, Miklos Boros
#Date:    20-11-2019
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-GB-114c PLC   -> EPICS status   ##########
##########

#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-GB-114c:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/500 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-GB-114c_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-GB-114c:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/500 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-GB-114c_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("Opened",                  PV_DESC="Opened",                    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-GB-114c:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/500 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-GB-114c_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Closed",                    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-GB-114c:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/500 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-GB-114c_iDB")
	info("plc_variable", "Closed")
}




############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-GB-114c EPICS -> PLC commands   ##########
##########

#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-GB-114c:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12428, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-GB-114c_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-GB-114c:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12428, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-GB-114c_iDB")
	info("plc_variable", "Cmd_Manual")
}


#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "Tgt-TWDS1000:Proc-GB-114c:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12428, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-GB-114c_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "Tgt-TWDS1000:Proc-GB-114c:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12428, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-GB-114c_iDB")
	info("plc_variable", "Cmd_ManuClose")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-GB-114c EPICS -> PLC parameters ##########
##########




##########
########## Tgt-TWDS1000:Proc-LS-013 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 0
########## StatusWordsLength: 1
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_DO                                                               ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                             DIO - Single Digital Input/Output                            ##
##                                                                                          ##
##                                                                                          ##
############################ Version: 1.0             ########################################
#Author:  Saeed, Miklos Boros
#Date:    20-11-2019
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-LS-013 PLC   -> EPICS status   ##########
##########

#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-LS-013:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/502 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-013_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-LS-013:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/502 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-013_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("Opened",                  PV_DESC="Opened",                    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-LS-013:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/502 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-013_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Closed",                    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-LS-013:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/502 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-013_iDB")
	info("plc_variable", "Closed")
}




############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-LS-013 EPICS -> PLC commands   ##########
##########

#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-LS-013:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12429, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-013_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-LS-013:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12429, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-013_iDB")
	info("plc_variable", "Cmd_Manual")
}


#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "Tgt-TWDS1000:Proc-LS-013:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12429, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-013_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "Tgt-TWDS1000:Proc-LS-013:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12429, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-013_iDB")
	info("plc_variable", "Cmd_ManuClose")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-LS-013 EPICS -> PLC parameters ##########
##########




##########
########## Tgt-TWDS1000:Proc-LS-014 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 0
########## StatusWordsLength: 1
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_DO                                                               ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                             DIO - Single Digital Input/Output                            ##
##                                                                                          ##
##                                                                                          ##
############################ Version: 1.0             ########################################
#Author:  Saeed, Miklos Boros
#Date:    20-11-2019
#Version: v1.0



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-LS-014 PLC   -> EPICS status   ##########
##########

#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-LS-014:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/504 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-014_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-LS-014:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/504 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-014_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("Opened",                  PV_DESC="Opened",                    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-LS-014:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/504 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-014_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Closed",                    PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-LS-014:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/504 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-014_iDB")
	info("plc_variable", "Closed")
}




############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-LS-014 EPICS -> PLC commands   ##########
##########

#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-LS-014:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12430, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-014_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-LS-014:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12430, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-014_iDB")
	info("plc_variable", "Cmd_Manual")
}


#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "Tgt-TWDS1000:Proc-LS-014:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12430, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-014_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "Tgt-TWDS1000:Proc-LS-014:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12430, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-LS-014_iDB")
	info("plc_variable", "Cmd_ManuClose")
}



############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-LS-014 EPICS -> PLC parameters ##########
##########




##########
########## Tgt-TWDS1000:Proc-YSV-013a ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 13
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                            ICS_SV - Solenoid On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.1             ################################
#Author:  Evan Foy
#Date:    12-12-2019
#Version: v1.1
#Changes:
#1. New device, branched from ICS_PV version 1.4.
#2. String message removed, for Beckhoff compatibility.



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-YSV-013a PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/506 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/506 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/506 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/506 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/506 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/506 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "Tgt-TWDS1000:Proc-YSV-013a:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/508 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "Tgt-TWDS1000:Proc-YSV-013a:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/510 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",          PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/512 T=UINT16 B=11")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-013a:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/514 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-013a:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/518 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",                PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/522 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "Group Alarm",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/522 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Group Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/522 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/522 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/522 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/522 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013a:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/522 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Output_Module_Error")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-013a:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/524 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-013a:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/528 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-YSV-013a EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-013a:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12431, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-013a:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12431, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-013a:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12431, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-013a:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12431, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-013a:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12431, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-013a:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12431, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-013a:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12431, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Proc-YSV-013a:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12431, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-013a:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12431, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-013a:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12431, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-013a:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12431, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-YSV-013a EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Proc-YSV-013a:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12432, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Proc-YSV-013a:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12434, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013a_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Proc-YSV-013a:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Proc-YSV-013a:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Proc-YSV-013a:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Proc-YSV-013b ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 13
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                            ICS_SV - Solenoid On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.1             ################################
#Author:  Evan Foy
#Date:    12-12-2019
#Version: v1.1
#Changes:
#1. New device, branched from ICS_PV version 1.4.
#2. String message removed, for Beckhoff compatibility.



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-YSV-013b PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/532 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/532 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/532 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/532 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/532 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/532 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "Tgt-TWDS1000:Proc-YSV-013b:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/534 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "Tgt-TWDS1000:Proc-YSV-013b:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/536 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",          PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/538 T=UINT16 B=11")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-013b:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/540 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-013b:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/544 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",                PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/548 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "Group Alarm",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/548 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Group Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/548 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/548 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/548 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/548 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013b:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/548 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Output_Module_Error")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-013b:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/550 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-013b:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/554 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-YSV-013b EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-013b:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12436, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-013b:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12436, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-013b:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12436, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-013b:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12436, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-013b:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12436, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-013b:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12436, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-013b:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12436, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Proc-YSV-013b:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12436, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-013b:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12436, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-013b:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12436, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-013b:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12436, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-YSV-013b EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Proc-YSV-013b:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12437, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Proc-YSV-013b:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12439, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013b_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Proc-YSV-013b:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Proc-YSV-013b:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Proc-YSV-013b:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Proc-YSV-013c ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 13
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                            ICS_SV - Solenoid On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.1             ################################
#Author:  Evan Foy
#Date:    12-12-2019
#Version: v1.1
#Changes:
#1. New device, branched from ICS_PV version 1.4.
#2. String message removed, for Beckhoff compatibility.



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-YSV-013c PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/558 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/558 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/558 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/558 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/558 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/558 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "Tgt-TWDS1000:Proc-YSV-013c:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/560 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "Tgt-TWDS1000:Proc-YSV-013c:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/562 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",          PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/564 T=UINT16 B=11")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-013c:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/566 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-013c:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/570 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",                PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/574 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "Group Alarm",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/574 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Group Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/574 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/574 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/574 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/574 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-013c:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/574 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Output_Module_Error")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-013c:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/576 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-013c:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/580 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-YSV-013c EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-013c:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12441, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-013c:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12441, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-013c:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12441, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-013c:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12441, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-013c:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12441, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-013c:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12441, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-013c:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12441, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Proc-YSV-013c:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12441, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-013c:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12441, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-013c:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12441, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-013c:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12441, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-YSV-013c EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Proc-YSV-013c:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12442, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Proc-YSV-013c:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12444, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-013c_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Proc-YSV-013c:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Proc-YSV-013c:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Proc-YSV-013c:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Proc-YSV-014a ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 13
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                            ICS_SV - Solenoid On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.1             ################################
#Author:  Evan Foy
#Date:    12-12-2019
#Version: v1.1
#Changes:
#1. New device, branched from ICS_PV version 1.4.
#2. String message removed, for Beckhoff compatibility.



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-YSV-014a PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/584 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/584 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/584 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/584 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/584 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/584 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "Tgt-TWDS1000:Proc-YSV-014a:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/586 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "Tgt-TWDS1000:Proc-YSV-014a:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/588 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",          PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/590 T=UINT16 B=11")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-014a:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/592 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-014a:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/596 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",                PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/600 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "Group Alarm",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/600 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Group Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/600 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/600 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/600 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/600 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014a:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/600 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Output_Module_Error")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-014a:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/602 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-014a:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/606 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-YSV-014a EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-014a:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12446, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-014a:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12446, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-014a:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12446, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-014a:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12446, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-014a:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12446, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-014a:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12446, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-014a:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12446, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Proc-YSV-014a:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12446, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-014a:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12446, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-014a:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12446, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-014a:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12446, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-YSV-014a EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Proc-YSV-014a:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12447, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Proc-YSV-014a:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12449, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014a_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Proc-YSV-014a:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Proc-YSV-014a:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Proc-YSV-014a:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Proc-YSV-014b ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 13
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                            ICS_SV - Solenoid On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.1             ################################
#Author:  Evan Foy
#Date:    12-12-2019
#Version: v1.1
#Changes:
#1. New device, branched from ICS_PV version 1.4.
#2. String message removed, for Beckhoff compatibility.



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-YSV-014b PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/610 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/610 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/610 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/610 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/610 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/610 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "Tgt-TWDS1000:Proc-YSV-014b:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/612 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "Tgt-TWDS1000:Proc-YSV-014b:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/614 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",          PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/616 T=UINT16 B=11")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-014b:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/618 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-014b:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/622 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",                PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/626 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "Group Alarm",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/626 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Group Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/626 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/626 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/626 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/626 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014b:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/626 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Output_Module_Error")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-014b:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/628 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-014b:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/632 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-YSV-014b EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-014b:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12451, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-014b:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12451, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-014b:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12451, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-014b:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12451, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-014b:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12451, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-014b:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12451, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-014b:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12451, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Proc-YSV-014b:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12451, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-014b:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12451, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-014b:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12451, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-014b:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12451, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-YSV-014b EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Proc-YSV-014b:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12452, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Proc-YSV-014b:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12454, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014b_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Proc-YSV-014b:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Proc-YSV-014b:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Proc-YSV-014b:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Proc-YSV-014c ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 13
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                            ICS_SV - Solenoid On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.1             ################################
#Author:  Evan Foy
#Date:    12-12-2019
#Version: v1.1
#Changes:
#1. New device, branched from ICS_PV version 1.4.
#2. String message removed, for Beckhoff compatibility.



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-YSV-014c PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/636 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/636 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/636 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/636 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/636 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/636 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "Tgt-TWDS1000:Proc-YSV-014c:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/638 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "Tgt-TWDS1000:Proc-YSV-014c:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/640 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",          PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/642 T=UINT16 B=11")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-014c:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/644 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-014c:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/648 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",                PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/652 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "Group Alarm",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/652 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Group Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/652 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/652 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/652 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/652 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-014c:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/652 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Output_Module_Error")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-014c:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/654 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-014c:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/658 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-YSV-014c EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-014c:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12456, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-014c:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12456, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-014c:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12456, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-014c:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12456, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-014c:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12456, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-014c:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12456, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-014c:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12456, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Proc-YSV-014c:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12456, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-014c:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12456, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-014c:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12456, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-014c:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12456, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-YSV-014c EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Proc-YSV-014c:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12457, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Proc-YSV-014c:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12459, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-014c_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Proc-YSV-014c:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Proc-YSV-014c:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Proc-YSV-014c:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Proc-YSV-034a ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 13
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                            ICS_SV - Solenoid On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.1             ################################
#Author:  Evan Foy
#Date:    12-12-2019
#Version: v1.1
#Changes:
#1. New device, branched from ICS_PV version 1.4.
#2. String message removed, for Beckhoff compatibility.



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-YSV-034a PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/662 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/662 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/662 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/662 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/662 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/662 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "Tgt-TWDS1000:Proc-YSV-034a:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/664 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "Tgt-TWDS1000:Proc-YSV-034a:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/666 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",          PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/668 T=UINT16 B=11")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-034a:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/670 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-034a:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/674 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",                PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/678 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "Group Alarm",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/678 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Group Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/678 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/678 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/678 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/678 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034a:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/678 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Output_Module_Error")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-034a:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/680 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-034a:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/684 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-YSV-034a EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-034a:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12461, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-034a:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12461, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-034a:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12461, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-034a:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12461, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-034a:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12461, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-034a:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12461, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-034a:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12461, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Proc-YSV-034a:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12461, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-034a:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12461, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-034a:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12461, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-034a:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12461, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-YSV-034a EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Proc-YSV-034a:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12462, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Proc-YSV-034a:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12464, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034a_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Proc-YSV-034a:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Proc-YSV-034a:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Proc-YSV-034a:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Proc-YSV-034b ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 4
########## StatusWordsLength: 13
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                            ICS_SV - Solenoid On/Off valve                                ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.1             ################################
#Author:  Evan Foy
#Date:    12-12-2019
#Version: v1.1
#Changes:
#1. New device, branched from ICS_PV version 1.4.
#2. String message removed, for Beckhoff compatibility.



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Proc-YSV-034b PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_Auto",             PV_DESC="Operation Mode Auto",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:OpMode_Auto")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Auto")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "OpMode_Auto")
}

#<<<--- add_digital("OpMode_Manual",           PV_DESC="Operation Mode Manual",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:OpMode_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Manual")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "OpMode_Manual")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",     PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Valve physical states
#<<<--- add_digital("Opened",                  PV_DESC="Valve Opened",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:Opened")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Opened")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Opened")
}

#<<<--- add_digital("Closed",                  PV_DESC="Valve Closed",              PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:Closed")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Valve Closed")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Closed")
}

#<<<--- add_digital("Solenoid",                PV_DESC="Solenoid energized",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:Solenoid")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/688 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Solenoid energized")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Solenoid")
}

#<<<--- add_analog("ValveColor",               "INT",                               PV_DESC="BlockIcon valve color")
record(ai, "Tgt-TWDS1000:Proc-YSV-034b:ValveColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/690 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon valve color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "ValveColor")
}

#<<<--- add_analog("SolenoidColor",            "INT",                               PV_DESC="BlockIcon solenoid color")
record(ai, "Tgt-TWDS1000:Proc-YSV-034b:SolenoidColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/692 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "BlockIcon solenoid color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "SolenoidColor")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",       PV_ONAM="InhibitManual",  PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",        PV_ONAM="InhibitForce",   PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",           PV_ONAM="InhibitLocking", PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Inhibit_Lock")
}


#Interlock signals
#<<<--- add_digital("GroupInterlock",          PV_DESC="Group Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:GroupInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Group Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "GroupInterlock")
}

#<<<--- add_digital("StartInterlock",          PV_DESC="Start Interlock",           PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:StartInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Start Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "StartInterlock")
}

#<<<--- add_digital("StopInterlock",           PV_DESC="Stop Interlock",            PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:StopInterlock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Stop Interlock")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "StopInterlock")
}


#Block Icon controls
#<<<--- add_digital("EnableBlkOpen",           PV_DESC="Enable Block Open Button",  PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:EnableBlkOpen")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Open Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "EnableBlkOpen")
}

#<<<--- add_digital("EnableBlkClose",          PV_DESC="Enable Block Close Button", PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:EnableBlkClose")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Block Close Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "EnableBlkClose")
}


#for OPI visualisation
#<<<--- add_digital("EnableAutoBtn",           PV_DESC="Enable Auto Button",        PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:EnableAutoBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Auto Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "EnableAutoBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",      PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",       PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=10")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "EnableForcedBtn")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",             PV_ONAM="True",           PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/694 T=UINT16 B=11")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                              PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-034b:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/696 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                              PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Proc-YSV-034b:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/700 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",                PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/704 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "Group Alarm",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/704 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Group Alarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Opening_TimeOut",     "Opening Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:Opening_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/704 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Opening Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Opening_TimeOut")
}

#<<<--- add_major_alarm("Closing_TimeOut",     "Closing Time Out",                  PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:Closing_TimeOut")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/704 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Closing Time Out")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Closing_TimeOut")
}

#<<<--- add_major_alarm("IO_Error",            "IO Error",                          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/704 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Input_Module_Error",  "HW Input Module Error",             PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:Input_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/704 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Input Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Input_Module_Error")
}

#<<<--- add_major_alarm("Output_Module_Error", "HW Output Module Error",            PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Proc-YSV-034b:Output_Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/704 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "HW Output Module Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Output_Module_Error")
}


#OPI timeouts
#<<<--- add_time("OpeningTime",                PV_DESC="Opening Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-034b:OpeningTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/706 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Opening Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "OpeningTime")
}

#<<<--- add_time("ClosingTime",                PV_DESC="Closing Time")
record(ai, "Tgt-TWDS1000:Proc-YSV-034b:ClosingTime")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/710 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Closing Time")
	field(EGU,  "ms")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "ClosingTime")
}


############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Proc-YSV-034b EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_Auto",                PV_DESC="CMD: Auto Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-034b:Cmd_Auto")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12466, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Auto Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Cmd_Auto")
}

#<<<--- add_digital("Cmd_Manual",              PV_DESC="CMD: Manual Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-034b:Cmd_Manual")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12466, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Cmd_Manual")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Proc-YSV-034b:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12466, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ManuOpen",            PV_DESC="CMD: Manual Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-034b:Cmd_ManuOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12466, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Cmd_ManuOpen")
}

#<<<--- add_digital("Cmd_ManuClose",           PV_DESC="CMD: Manual Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-034b:Cmd_ManuClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12466, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Manual Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Cmd_ManuClose")
}

#<<<--- add_digital("Cmd_ForceOpen",           PV_DESC="CMD: Force Open")
record(bo, "Tgt-TWDS1000:Proc-YSV-034b:Cmd_ForceOpen")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12466, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Open")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Cmd_ForceOpen")
}

#<<<--- add_digital("Cmd_ForceClose",          PV_DESC="CMD: Force Close")
record(bo, "Tgt-TWDS1000:Proc-YSV-034b:Cmd_ForceClose")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12466, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Close")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Cmd_ForceClose")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Proc-YSV-034b:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12466, 0x0080, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-034b:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12466, 0x0100, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-034b:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12466, 0x0200, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Proc-YSV-034b:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12466, 0x0400, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Proc-YSV-034b EPICS -> PLC parameters ##########
##########

#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                              PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Proc-YSV-034b:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12467, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                              PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Proc-YSV-034b:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12469, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Proc-YSV-034b_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Proc-YSV-034b:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Proc-YSV-034b:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Proc-YSV-034b:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-BA-011x ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 25
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                         VME - Vibration accelerometer in m/s2                            ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.0, 1.1, 1.2             ######################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-BA-011x PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/714 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/714 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/714 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/714 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/714 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-BA-011x:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/716 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/718 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/718 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/718 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011x:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/720 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011x:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/724 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Acceleration Value",         PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011x:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/728 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Acceleration Value")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "MeasValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/732 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-011x:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/734 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-011x:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/738 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",             PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/742 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/742 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/742 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/742 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/742 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/742 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/742 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/742 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/742 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011x:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/742 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011x:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/744 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011x:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/748 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011x:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/752 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011x:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/756 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011x:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/760 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-BA-011x EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-011x:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12471, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-011x:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12471, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-BA-011x:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12471, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-BA-011x:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12471, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-011x:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12471, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-011x:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12471, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-011x:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12471, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-BA-011x EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-011x:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12472, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-011x:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12474, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-011x:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12476, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-011x:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12478, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-011x:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12480, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-BA-011x:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12482, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-BA-011x:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12484, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011x_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-BA-011x:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-011x:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-011x:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-BA-011x:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-BA-011x:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-BA-011x:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-BA-011x:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-BA-011x:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-011x:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-011x:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-BA-011y ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 25
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                         VME - Vibration accelerometer in m/s2                            ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.0, 1.1, 1.2             ######################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-BA-011y PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/764 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/764 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/764 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/764 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/764 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-BA-011y:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/766 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/768 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/768 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/768 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011y:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/770 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011y:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/774 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Acceleration Value",         PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011y:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/778 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Acceleration Value")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "MeasValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/782 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-011y:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/784 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-011y:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/788 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",             PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/792 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/792 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/792 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/792 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/792 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/792 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/792 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/792 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/792 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-011y:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/792 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011y:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/794 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011y:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/798 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011y:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/802 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011y:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/806 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-011y:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/810 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-BA-011y EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-011y:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12486, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-011y:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12486, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-BA-011y:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12486, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-BA-011y:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12486, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-011y:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12486, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-011y:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12486, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-011y:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12486, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-BA-011y EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-011y:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12487, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-011y:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12489, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-011y:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12491, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-011y:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12493, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-011y:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12495, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-BA-011y:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12497, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-BA-011y:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12499, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-011y_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-BA-011y:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-011y:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-011y:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-BA-011y:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-BA-011y:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-BA-011y:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-BA-011y:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-BA-011y:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-011y:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-011y:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-BA-012x ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 25
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                         VME - Vibration accelerometer in m/s2                            ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.0, 1.1, 1.2             ######################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-BA-012x PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/814 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/814 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/814 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/814 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/814 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-BA-012x:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/816 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/818 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/818 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/818 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012x:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/820 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012x:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/824 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Acceleration Value",         PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012x:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/828 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Acceleration Value")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "MeasValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/832 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-012x:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/834 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-012x:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/838 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",             PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/842 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/842 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/842 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/842 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/842 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/842 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/842 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/842 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/842 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012x:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/842 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012x:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/844 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012x:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/848 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012x:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/852 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012x:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/856 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012x:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/860 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-BA-012x EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-012x:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12501, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-012x:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12501, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-BA-012x:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12501, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-BA-012x:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12501, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-012x:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12501, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-012x:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12501, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-012x:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12501, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-BA-012x EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-012x:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12502, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-012x:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12504, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-012x:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12506, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-012x:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12508, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-012x:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12510, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-BA-012x:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12512, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-BA-012x:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12514, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012x_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-BA-012x:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-012x:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-012x:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-BA-012x:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-BA-012x:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-BA-012x:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-BA-012x:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-BA-012x:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-012x:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-012x:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-BA-012y ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 25
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                         VME - Vibration accelerometer in m/s2                            ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.0, 1.1, 1.2             ######################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-BA-012y PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/864 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/864 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/864 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/864 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/864 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-BA-012y:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/866 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/868 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/868 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/868 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012y:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/870 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012y:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/874 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Acceleration Value",         PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012y:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/878 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Acceleration Value")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "MeasValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/882 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-012y:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/884 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-012y:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/888 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",             PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/892 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/892 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/892 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/892 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/892 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/892 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/892 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/892 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/892 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-012y:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/892 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012y:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/894 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012y:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/898 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012y:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/902 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012y:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/906 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-012y:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/910 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-BA-012y EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-012y:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12516, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-012y:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12516, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-BA-012y:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12516, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-BA-012y:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12516, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-012y:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12516, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-012y:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12516, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-012y:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12516, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-BA-012y EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-012y:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12517, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-012y:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12519, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-012y:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12521, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-012y:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12523, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-012y:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12525, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-BA-012y:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12527, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-BA-012y:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12529, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-012y_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-BA-012y:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-012y:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-012y:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-BA-012y:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-BA-012y:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-BA-012y:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-BA-012y:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-BA-012y:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-012y:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-012y:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-BA-021 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 25
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                         VME - Vibration accelerometer in m/s2                            ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.0, 1.1, 1.2             ######################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-BA-021 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-021:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/914 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-021:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/914 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-BA-021:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/914 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-BA-021:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/914 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-BA-021:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/914 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-BA-021:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/916 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-021:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/918 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-021:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/918 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-021:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/918 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-021:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/920 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-021:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/924 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Acceleration Value",         PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-021:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/928 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Acceleration Value")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "MeasValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-021:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/932 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-021:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/934 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-021:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/938 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",             PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Mech-BA-021:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/942 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-021:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/942 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-021:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/942 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-021:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/942 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-021:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/942 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-021:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/942 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-021:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/942 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-021:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/942 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-021:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/942 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-021:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/942 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-021:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/944 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-021:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/948 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-021:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/952 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-021:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/956 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-021:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/960 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-BA-021 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-021:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12531, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-021:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12531, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-BA-021:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12531, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-BA-021:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12531, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-021:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12531, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-021:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12531, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-021:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12531, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-BA-021 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-021:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12532, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-021:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12534, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-021:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12536, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-021:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12538, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-021:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12540, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-BA-021:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12542, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-BA-021:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12544, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-021_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-BA-021:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-021:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-021:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-BA-021:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-BA-021:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-BA-021:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-BA-021:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-BA-021:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-021:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-021:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-BA-022 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 25
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                         VME - Vibration accelerometer in m/s2                            ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.0, 1.1, 1.2             ######################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-BA-022 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-022:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/964 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-022:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/964 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-BA-022:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/964 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-BA-022:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/964 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-BA-022:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/964 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-BA-022:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/966 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-022:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/968 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-022:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/968 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-022:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/968 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-022:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/970 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-022:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/974 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Acceleration Value",         PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-022:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/978 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Acceleration Value")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "MeasValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-022:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/982 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-022:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/984 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-022:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/988 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",             PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Mech-BA-022:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/992 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-022:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/992 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-022:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/992 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-022:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/992 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-022:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/992 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-022:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/992 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-022:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/992 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-022:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/992 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-022:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/992 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-022:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/992 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-022:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/994 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-022:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/998 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-022:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1002 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-022:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1006 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-022:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1010 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-BA-022 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-022:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12546, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-022:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12546, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-BA-022:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12546, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-BA-022:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12546, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-022:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12546, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-022:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12546, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-022:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12546, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-BA-022 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-022:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12547, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-022:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12549, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-022:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12551, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-022:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12553, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-022:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12555, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-BA-022:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12557, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-BA-022:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12559, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-022_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-BA-022:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-022:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-022:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-BA-022:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-BA-022:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-BA-022:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-BA-022:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-BA-022:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-022:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-022:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-BA-023 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 25
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                         VME - Vibration accelerometer in m/s2                            ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.0, 1.1, 1.2             ######################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-BA-023 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-023:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1014 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-023:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1014 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-BA-023:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1014 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-BA-023:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1014 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-BA-023:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1014 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-BA-023:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1016 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-023:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1018 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-023:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1018 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-023:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1018 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-023:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1020 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-023:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1024 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Acceleration Value",         PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-023:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1028 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Acceleration Value")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "MeasValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-023:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1032 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-023:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1034 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-023:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1038 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",             PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Mech-BA-023:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1042 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-023:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1042 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-023:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1042 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-023:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1042 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-023:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1042 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-023:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1042 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-023:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1042 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-023:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1042 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-023:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1042 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-023:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1042 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-023:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1044 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-023:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1048 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-023:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1052 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-023:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1056 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-023:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1060 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-BA-023 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-023:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12561, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-023:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12561, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-BA-023:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12561, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-BA-023:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12561, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-023:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12561, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-023:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12561, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-023:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12561, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-BA-023 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-023:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12562, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-023:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12564, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-023:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12566, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-023:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12568, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-023:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12570, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-BA-023:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12572, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-BA-023:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12574, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-023_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-BA-023:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-023:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-023:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-BA-023:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-BA-023:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-BA-023:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-BA-023:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-BA-023:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-023:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-023:P_BlockIcon_LockID")
}



##########
########## Tgt-TWDS1000:Mech-BA-024 ##########
##########
########## CommandWordsLength: 1
########## ParameterWordsLength: 14
########## StatusWordsLength: 25
##########

###################################### ICS HWI ###############################################
#############################  ICS Instrument Library     ####################################
##  PLC Sample Code in VersionDog: ICS_LIBRARY_MASTER_PLC                                   ##
##  CCDB device types: ICS_xxxxx                                                            ##
##  EPICS HMI (Block Icons/Faceplates)@ GitLab. Projekt: Cryo / CryogenicsLibrary / CryoLib ##
##                                                                                          ##
##                         VME - Vibration accelerometer in m/s2                            ##
##                                                                                          ##
##                                                                                          ##
############################         Version: 1.3             ################################
#Author:  Miklos Boros
#Date:    27-05-2019
#Version: v1.3
#Changes:
#1. Variable Name Unification
############################         Version: 1.0, 1.1, 1.2             ######################
#Author:  Miklos Boros
#Date:    28-02-2019
#Version: v1.2
#Changes:
#1. Major review,
#2. Indent,  unit standardization



############################
#STATUS BLOCK
############################
#<<<--- define_status_block()

##########
########## Tgt-TWDS1000:Mech-BA-024 PLC   -> EPICS status   ##########
##########

#Operation modes
#<<<--- add_digital("OpMode_FreeRun",          PV_DESC="Operation Mode FreeRun", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-024:OpMode_FreeRun")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1064 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode FreeRun")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "OpMode_FreeRun")
}

#<<<--- add_digital("OpMode_Forced",           PV_DESC="Operation Mode Forced",  PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-024:OpMode_Forced")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1064 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Operation Mode Forced")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "OpMode_Forced")
}


#Inhibit signals (set by the PLC code, can't be changed by the OPI)
#<<<--- add_digital("Inhibit_Manual",          PV_DESC="Inhibit Manual Mode",    PV_ONAM="InhibitManual",              PV_ZNAM="AllowManual")
record(bi, "Tgt-TWDS1000:Mech-BA-024:Inhibit_Manual")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1064 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Manual Mode")
	field(ONAM, "InhibitManual")
	field(ZNAM, "AllowManual")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Inhibit_Manual")
}

#<<<--- add_digital("Inhibit_Force",           PV_DESC="Inhibit Force Mode",     PV_ONAM="InhibitForce",               PV_ZNAM="AllowForce")
record(bi, "Tgt-TWDS1000:Mech-BA-024:Inhibit_Force")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1064 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Force Mode")
	field(ONAM, "InhibitForce")
	field(ZNAM, "AllowForce")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Inhibit_Force")
}

#<<<--- add_digital("Inhibit_Lock",            PV_DESC="Inhibit Locking",        PV_ONAM="InhibitLocking",             PV_ZNAM="AllowLocking")
record(bi, "Tgt-TWDS1000:Mech-BA-024:Inhibit_Lock")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1064 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Inhibit Locking")
	field(ONAM, "InhibitLocking")
	field(ZNAM, "AllowLocking")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Inhibit_Lock")
}

#<<<--- add_analog("TransmitterColor",         "INT",                            PV_DESC="Transmitter color")
record(ai, "Tgt-TWDS1000:Mech-BA-024:TransmitterColor")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1066 T=INT16")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Transmitter color")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "TransmitterColor")
}


#for OPI visualization
#<<<--- add_digital("EnableFreeRunBtn",        PV_DESC="Enable Free Run Button", PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-024:EnableFreeRunBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1068 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Free Run Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "EnableFreeRunBtn")
}

#<<<--- add_digital("EnableForcedBtn",         PV_DESC="Enable Force Button",    PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-024:EnableForcedBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1068 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Force Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "EnableForcedBtn")
}

#<<<--- add_digital("EnableManualBtn",         PV_DESC="Enable Manual Button",   PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-024:EnableManualBtn")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1068 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Enable Manual Button")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "EnableManualBtn")
}

#<<<--- add_analog("ScaleLOW",                 "REAL",                           PV_DESC="Scale LOW",                  PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-024:ScaleLOW")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1070 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale LOW")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "ScaleLOW")
}

#<<<--- add_analog("ScaleHIGH",                "REAL",                           PV_DESC="Scale HIGH",                 PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-024:ScaleHIGH")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1074 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Scale HIGH")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "ScaleHIGH")
}


#Transmitter value
#<<<--- add_analog("MeasValue",                "REAL",                           PV_DESC="Acceleration Value",         PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-024:MeasValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1078 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Acceleration Value")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "MeasValue")
}


#Locking mechanism
#<<<--- add_digital("DevLocked",               PV_DESC="Device Locked",          PV_ONAM="True",                       PV_ZNAM="False")
record(bi, "Tgt-TWDS1000:Mech-BA-024:DevLocked")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1082 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device Locked")
	field(ONAM, "True")
	field(ZNAM, "False")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "DevLocked")
}

#<<<--- add_analog("Faceplate_LockID",         "DINT",                           PV_DESC="Owner Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-024:Faceplate_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1084 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Owner Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Faceplate_LockID")
}

#<<<--- add_analog("BlockIcon_LockID",         "DINT",                           PV_DESC="Guest Lock ID")
record(ai, "Tgt-TWDS1000:Mech-BA-024:BlockIcon_LockID")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1088 T=INT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Guest Lock ID")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "BlockIcon_LockID")
}


#Alarm signals
#<<<--- add_major_alarm("LatchAlarm",          "Latching of alarms",             PV_ZNAM="True")
record(bi, "Tgt-TWDS1000:Mech-BA-024:LatchAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1092 T=UINT16 B=0")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Latching of alarms")
	field(OSV,  "MAJOR")
	field(ZNAM, "True")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "LatchAlarm")
}

#<<<--- add_major_alarm("GroupAlarm",          "GroupAlarm",                     PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-024:GroupAlarm")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1092 T=UINT16 B=1")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "GroupAlarm")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "GroupAlarm")
}

#<<<--- add_major_alarm("Underrange",          "Temperature Underrange",         PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-024:Underrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1092 T=UINT16 B=2")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Underrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Underrange")
}

#<<<--- add_major_alarm("Overrange",           "Temperature Overrange",          PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-024:Overrange")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1092 T=UINT16 B=3")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature Overrange")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Overrange")
}

#<<<--- add_major_alarm("HIHI",                "Temperature HIHI",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-024:HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1092 T=UINT16 B=4")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HIHI")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "HIHI")
}

#<<<--- add_minor_alarm("HI",                  "Temperature HI",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-024:HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1092 T=UINT16 B=5")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature HI")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "HI")
}

#<<<--- add_minor_alarm("LO",                  "Temperature LO",                 PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-024:LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1092 T=UINT16 B=6")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LO")
	field(OSV,  "MINOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "LO")
}

#<<<--- add_major_alarm("LOLO",                "Temperature LOLO",               PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-024:LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1092 T=UINT16 B=7")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Temperature LOLO")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "LOLO")
}

#<<<--- add_major_alarm("IO_Error",            "IO_Error",                       PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-024:IO_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1092 T=UINT16 B=8")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "IO_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "IO_Error")
}

#<<<--- add_major_alarm("Module_Error",        "Module_Error",                   PV_ZNAM="NominalState")
record(bi, "Tgt-TWDS1000:Mech-BA-024:Module_Error")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1092 T=UINT16 B=9")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(ONAM, "Module_Error")
	field(OSV,  "MAJOR")
	field(ZNAM, "NominalState")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Module_Error")
}


#Feedback
#<<<--- add_analog("FB_ForceValue",            "REAL",                           PV_DESC="Feedback Force Temperature", PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-024:FB_ForceValue")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1094 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "FB_ForceValue")
}

#<<<--- add_analog("FB_Limit_HIHI",            "REAL",                           PV_DESC="Feedback Limit HIHI",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-024:FB_Limit_HIHI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1098 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "FB_Limit_HIHI")
}

#<<<--- add_analog("FB_Limit_HI",              "REAL",                           PV_DESC="Feedback Limit HI",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-024:FB_Limit_HI")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1102 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "FB_Limit_HI")
}

#<<<--- add_analog("FB_Limit_LO",              "REAL",                           PV_DESC="Feedback Limit LO",          PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-024:FB_Limit_LO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1106 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "FB_Limit_LO")
}

#<<<--- add_analog("FB_Limit_LOLO",            "REAL",                           PV_DESC="Feedback Limit LOLO",        PV_EGU="m/s2")
record(ai, "Tgt-TWDS1000:Mech-BA-024:FB_Limit_LOLO")
{
	field(SCAN, "I/O Intr")
	field(DTYP, "S7plc")
	field(INP,  "@$(PLCNAME)/1110 T=FLOAT32")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Feedback Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "FB_Limit_LOLO")
}



############################
#COMMAND BLOCK
############################
#<<<--- define_command_block()

##########
########## Tgt-TWDS1000:Mech-BA-024 EPICS -> PLC commands   ##########
##########

#OPI buttons
#<<<--- add_digital("Cmd_FreeRun",             PV_DESC="CMD: FreeRun Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-024:Cmd_FreeRun")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12576, 0x0001, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: FreeRun Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Cmd_FreeRun")
}

#<<<--- add_digital("Cmd_Force",               PV_DESC="CMD: Force Mode")
record(bo, "Tgt-TWDS1000:Mech-BA-024:Cmd_Force")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12576, 0x0002, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Mode")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Cmd_Force")
}

#<<<--- add_digital("Cmd_ForceVal",            PV_DESC="CMD: Force Value")
record(bo, "Tgt-TWDS1000:Mech-BA-024:Cmd_ForceVal")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12576, 0x0004, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Value")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Cmd_ForceVal")
}


#<<<--- add_digital("Cmd_AckAlarm",            PV_DESC="CMD: Acknowledge Alarm")
record(bo, "Tgt-TWDS1000:Mech-BA-024:Cmd_AckAlarm")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12576, 0x0008, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Acknowledge Alarm")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Cmd_AckAlarm")
}


#<<<--- add_digital("Cmd_ForceUnlock",         PV_DESC="CMD: Force Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-024:Cmd_ForceUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12576, 0x0010, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Force Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Cmd_ForceUnlock")
}

#<<<--- add_digital("Cmd_DevLock",             PV_DESC="CMD: Lock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-024:Cmd_DevLock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12576, 0x0020, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Lock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Cmd_DevLock")
}

#<<<--- add_digital("Cmd_DevUnlock",           PV_DESC="CMD: Unlock Device")
record(bo, "Tgt-TWDS1000:Mech-BA-024:Cmd_DevUnlock")
{
	field(DTYP, "asynUInt32Digital")
	field(OUT,  "@asynMask($(PLCNAME)write, 12576, 0x0040, 100)")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "CMD: Unlock Device")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "Cmd_DevUnlock")
}


############################
#PARAMETER BLOCK
############################
#<<<--- define_parameter_block()

##########
########## Tgt-TWDS1000:Mech-BA-024 EPICS -> PLC parameters ##########
##########

#Limits
#<<<--- add_analog("P_Limit_HIHI",             "REAL",                           PV_DESC="Limit HIHI",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-024:P_Limit_HIHI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12577, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HIHI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "P_Limit_HIHI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_HI",               "REAL",                           PV_DESC="Limit HI",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-024:P_Limit_HI")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12579, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit HI")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "P_Limit_HI")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LO",               "REAL",                           PV_DESC="Limit LO",                   PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-024:P_Limit_LO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12581, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "P_Limit_LO")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_Limit_LOLO",             "REAL",                           PV_DESC="Limit LOLO",                 PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-024:P_Limit_LOLO")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12583, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Limit LOLO")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "P_Limit_LOLO")
	info(autosaveFields_pass0, "VAL")
}


#Forcing
#<<<--- add_analog("P_ForceValue",             "REAL",                           PV_DESC="Force Temperature",          PV_EGU="m/s2")
record(ao, "Tgt-TWDS1000:Mech-BA-024:P_ForceValue")
{
	field(DTYP, "asynFloat64")
	field(OUT,  "@asyn($(PLCNAME)write, 12585, 100)FLOAT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Force Temperature")
	field(EGU,  "m/s2")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "P_ForceValue")
	info(autosaveFields_pass0, "VAL")
}


#Locking mechanism
#<<<--- add_analog("P_Faceplate_LockID",       "DINT",                           PV_DESC="Device ID after Lock")
record(ao, "Tgt-TWDS1000:Mech-BA-024:P_Faceplate_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12587, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Lock")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "P_Faceplate_LockID")
	info(autosaveFields_pass0, "VAL")
}

#<<<--- add_analog("P_BlockIcon_LockID",       "DINT",                           PV_DESC="Device ID after Blockicon Open")
record(ao, "Tgt-TWDS1000:Mech-BA-024:P_BlockIcon_LockID")
{
	field(DTYP, "asynInt32")
	field(OUT,  "@asyn($(PLCNAME)write, 12589, 100)INT32_LE")
	field(DISS, "INVALID")
	field(DISV, "0")
	field(SDIS, "Tgt-TWDS1000:Ctrl-PLC-01:PLCHashCorrectR")
	field(DESC, "Device ID after Blockicon Open")
	field(DRVH, "2147483647")
	field(DRVL, "-2147483648")
	info("plc_datablock", "DEV_Tgt-TWDS1000:Mech-BA-024_iDB")
	info("plc_variable", "P_BlockIcon_LockID")
	info(autosaveFields_pass0, "VAL")
}

record(fanout, "Tgt-TWDS1000:Mech-BA-024:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-024:P_Limit_HIHI")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-024:P_Limit_HI")
	field(LNK3, "Tgt-TWDS1000:Mech-BA-024:P_Limit_LO")
	field(LNK4, "Tgt-TWDS1000:Mech-BA-024:P_Limit_LOLO")
	field(LNK5, "Tgt-TWDS1000:Mech-BA-024:P_ForceValue")
	field(LNK6, "Tgt-TWDS1000:Mech-BA-024:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Mech-BA-024:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-024:P_Faceplate_LockID")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-024:P_BlockIcon_LockID")
}



record(fanout, "Tgt-TWDS1000:Ctrl-PLC-01:UploadParametersS") {
	field(LNK1, "Tgt-TWDS1000:Mech-EE-050:UploadParametersS")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-011:UploadParametersS")
	field(LNK3, "Tgt-TWDS1000:Mech-TE-012:UploadParametersS")
	field(LNK4, "Tgt-TWDS1000:Mech-TE-021:UploadParametersS")
	field(LNK5, "Tgt-TWDS1000:Mech-TE-022:UploadParametersS")
	field(LNK6, "Tgt-TWDS1000:Ctrl-PLC-01:_UploadParamS1-FO")
}
record(fanout, "Tgt-TWDS1000:Ctrl-PLC-01:_UploadParamS1-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-TE-023:UploadParametersS")
	field(LNK2, "Tgt-TWDS1000:Mech-TE-024:UploadParametersS")
	field(LNK3, "Tgt-TWDS1000:Mech-TE-025:UploadParametersS")
	field(LNK4, "Tgt-TWDS1000:Proc-P-013:UploadParametersS")
	field(LNK5, "Tgt-TWDS1000:Proc-P-014:UploadParametersS")
	field(LNK6, "Tgt-TWDS1000:Ctrl-PLC-01:_UploadParamS2-FO")
}
record(fanout, "Tgt-TWDS1000:Ctrl-PLC-01:_UploadParamS2-FO") {
	field(LNK1, "Tgt-TWDS1000:Proc-YSV-013a:UploadParametersS")
	field(LNK2, "Tgt-TWDS1000:Proc-YSV-013b:UploadParametersS")
	field(LNK3, "Tgt-TWDS1000:Proc-YSV-013c:UploadParametersS")
	field(LNK4, "Tgt-TWDS1000:Proc-YSV-014a:UploadParametersS")
	field(LNK5, "Tgt-TWDS1000:Proc-YSV-014b:UploadParametersS")
	field(LNK6, "Tgt-TWDS1000:Ctrl-PLC-01:_UploadParamS3-FO")
}
record(fanout, "Tgt-TWDS1000:Ctrl-PLC-01:_UploadParamS3-FO") {
	field(LNK1, "Tgt-TWDS1000:Proc-YSV-014c:UploadParametersS")
	field(LNK2, "Tgt-TWDS1000:Proc-YSV-034a:UploadParametersS")
	field(LNK3, "Tgt-TWDS1000:Proc-YSV-034b:UploadParametersS")
	field(LNK4, "Tgt-TWDS1000:Mech-BA-011x:UploadParametersS")
	field(LNK5, "Tgt-TWDS1000:Mech-BA-011y:UploadParametersS")
	field(LNK6, "Tgt-TWDS1000:Ctrl-PLC-01:_UploadParamS4-FO")
}
record(fanout, "Tgt-TWDS1000:Ctrl-PLC-01:_UploadParamS4-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-012x:UploadParametersS")
	field(LNK2, "Tgt-TWDS1000:Mech-BA-012y:UploadParametersS")
	field(LNK3, "Tgt-TWDS1000:Mech-BA-021:UploadParametersS")
	field(LNK4, "Tgt-TWDS1000:Mech-BA-022:UploadParametersS")
	field(LNK5, "Tgt-TWDS1000:Mech-BA-023:UploadParametersS")
	field(LNK6, "Tgt-TWDS1000:Ctrl-PLC-01:_UploadParamS5-FO")
}
record(fanout, "Tgt-TWDS1000:Ctrl-PLC-01:_UploadParamS5-FO") {
	field(LNK1, "Tgt-TWDS1000:Mech-BA-024:UploadParametersS")
}
